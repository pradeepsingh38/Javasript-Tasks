<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="track">Track me</button>
    <script>
        // const trackBtn = document.getElementById("track");

        // trackBtn.addEventListener("click",handleTrack);
        // function handleTrack(){
        //     navigator.geolocation.getCurrentPosition(
        //         (posData)=>{
        //             setTimeout(()=>{
        //                 console.log(posData);                   
        //             },2000)
        //         },
        //         (reject)=>{
        //             console.log(reject);
        //         }                
        //     )
        //     console.log("gettting pos.");
            
        // }



        //promise------
        // const promises = new Promise( (resolve,reject)=>{
        //     let randumNum =  Math.floor(1000 * Math.random());
        //     console.log(randumNum);
            
        //     if (randumNum>1000){
        //         resolve("you won the rupees !")
        //     }
        //     else{
        //         reject("you lost !!")
        //     }
        // })

        // promises.then( (data)=>{
        //     console.log("you won");
        // }).catch( (denied)=>{
        //     console.log(denied);
            
        // });




        //-------promise in geolocation timer 

        const trackBtn = document.getElementById("track");
        trackBtn.addEventListener("click",handleTrack);


        const timer = (duration)=>{
            const timerPromise = new Promise( (resolve, reject)=>{
                setTimeout( ()=>{
                    resolve("done timer !");
                },duration)
            })
            return timerPromise
        }
        const getPosition = ()=>{
            return new Promise( (sucess,denied)=>{
                navigator.geolocation.getCurrentPosition((posData)=>{
                    sucess(posData);
                }),
                (rejected=>{
                    rejected(denied);
                })

            })
        }

        


        function handleTrack(){
            // navigator.geolocation.getCurrentPosition(
            //     (posData)=>{
            //         timer(2000).then( (tmData)=>{
            //             console.log(posData);
            //         })
            //     },
            //     (reject)=>{
            //         console.log(reject);
            //     }
            // )

            let getPostData;
            getPosition().then( (suceesData)=>{  //position promise handle
                getPostData=suceesData;
                return timer(2000)
            }).then(()=>{ // timer promise handle
                console.log(getPostData);
            }).catch();


            timer(0).then( (data)=>{
                console.log(data);
            })
            
            console.log("gettting pos.");
            
        }

    </script>
</body>
</html>